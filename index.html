<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¡œë˜ ë²ˆí˜¸ ë¶„ì„ê¸°</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ° ë¡œë˜ ë²ˆí˜¸ ë¶„ì„ê¸°</h1>
            <p>ìµœê·¼ 1ë…„ê°„ ë¡œë˜ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ë²ˆí˜¸ë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤</p>
        </header>

        <div class="controls">
            <button id="analyzeBtn" class="btn-primary">ğŸ“Š ë°ì´í„° ë¶„ì„ ì‹œì‘</button>
            <button id="generateBtn" class="btn-secondary" disabled>ğŸ² ë²ˆí˜¸ ìƒì„±</button>
            <div class="loading" id="loading" style="display: none;">
                <div class="spinner"></div>
                <span>ë°ì´í„° ë¶„ì„ ì¤‘...</span>
            </div>
        </div>

        <div class="status" id="status"></div>

        <div class="tabs">
            <button class="tab-btn active" data-tab="analysis">ğŸ“ˆ ë¶„ì„ ê²°ê³¼</button>
            <button class="tab-btn" data-tab="hot-numbers">ğŸ”¥ ìì£¼ ë‚˜ì˜¨ ë²ˆí˜¸</button>
            <button class="tab-btn" data-tab="cold-numbers">â„ï¸ ì ê²Œ ë‚˜ì˜¨ ë²ˆí˜¸</button>
            <button class="tab-btn" data-tab="recommended">ğŸ¯ AI ì¶”ì²œ</button>
        </div>

        <div class="tab-content">
            <!-- ë¶„ì„ ê²°ê³¼ íƒ­ -->
            <div id="analysis" class="tab-panel active">
                <div class="analysis-grid">
                    <div class="card">
                        <h3>ğŸ“Š ë²ˆí˜¸ë³„ ì¶œí˜„ ë¹ˆë„</h3>
                        <canvas id="frequencyChart"></canvas>
                    </div>
                    <div class="card">
                        <h3>ğŸ”¢ í™€ì§ ë¶„í¬</h3>
                        <canvas id="oddEvenChart"></canvas>
                    </div>
                    <div class="card">
                        <h3>ğŸ“ êµ¬ê°„ë³„ ë¶„í¬</h3>
                        <canvas id="rangeChart"></canvas>
                    </div>
                    <div class="card">
                        <h3>ğŸ“ˆ í•©ê³„ ë¶„í¬</h3>
                        <canvas id="sumChart"></canvas>
                    </div>
                </div>
                
                <div class="stats-summary" id="statsSummary">
                    <!-- í†µê³„ ìš”ì•½ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
            </div>

            <!-- ìì£¼ ë‚˜ì˜¨ ë²ˆí˜¸ íƒ­ -->
            <div id="hot-numbers" class="tab-panel">
                <div class="card">
                    <h3>ğŸ”¥ ìì£¼ ë‚˜ì˜¨ ë²ˆí˜¸ TOP 15</h3>
                    <div id="hotNumbersList" class="number-list">
                        <!-- ìì£¼ ë‚˜ì˜¨ ë²ˆí˜¸ ëª©ë¡ -->
                    </div>
                </div>
                
                <div class="card">
                    <h3>ğŸ”¥ ìì£¼ ë‚˜ì˜¨ ë²ˆí˜¸ ê¸°ë°˜ ì¶”ì²œ</h3>
                    <div id="hotRecommendations" class="lotto-sets">
                        <!-- ì¶”ì²œ ë²ˆí˜¸ ì„¸íŠ¸ë“¤ -->
                    </div>
                </div>
            </div>

            <!-- ì ê²Œ ë‚˜ì˜¨ ë²ˆí˜¸ íƒ­ -->
            <div id="cold-numbers" class="tab-panel">
                <div class="card">
                    <h3>â„ï¸ ì ê²Œ ë‚˜ì˜¨ ë²ˆí˜¸ TOP 15</h3>
                    <div id="coldNumbersList" class="number-list">
                        <!-- ì ê²Œ ë‚˜ì˜¨ ë²ˆí˜¸ ëª©ë¡ -->
                    </div>
                </div>
                
                <div class="card">
                    <h3>â„ï¸ ì ê²Œ ë‚˜ì˜¨ ë²ˆí˜¸ ê¸°ë°˜ ì¶”ì²œ</h3>
                    <div id="coldRecommendations" class="lotto-sets">
                        <!-- ì¶”ì²œ ë²ˆí˜¸ ì„¸íŠ¸ë“¤ -->
                    </div>
                </div>
            </div>

            <!-- AI ì¶”ì²œ íƒ­ -->
            <div id="recommended" class="tab-panel">
                <div class="card">
                    <h3>ğŸ¯ AI ì¢…í•© ë¶„ì„ ì¶”ì²œ ë²ˆí˜¸</h3>
                    <p class="description">ë¹ˆë„, êµ¬ê°„ ê· í˜•, í™€ì§ ê· í˜•ì„ ì¢…í•©ì ìœ¼ë¡œ ê³ ë ¤í•œ ì¶”ì²œ ë²ˆí˜¸ì…ë‹ˆë‹¤.</p>
                                      // ...existing code...
                    
                    // ìµœì‹  íšŒì°¨ ë²ˆí˜¸ ê°€ì ¸ì˜¤ê¸° (ì˜ˆì‹œ: 903íšŒ ì´í›„ ìµœì‹  íšŒì°¨ ìë™ íƒìƒ‰)
                    async function getLatestDrawNo() {
                        let drawNo = 1100; // ëŒ€ëµ ìµœì‹  íšŒì°¨ ì˜ˆìƒê°’
                        while (drawNo > 0) {
                            const res = await fetch(`https://www.dhlottery.co.kr/common.do?method=getLottoNumber&drwNo=${drawNo}`);
                            const data = await res.json();
                            if (data.returnValue === "success") return drawNo;
                            drawNo--;
                        }
                        return null;
                    }
                    
                    // íŠ¹ì • íšŒì°¨ì˜ ë‹¹ì²¨ë²ˆí˜¸ ê°€ì ¸ì˜¤ê¸°
                    async function fetchLottoNumbers(drawNo) {
                        const res = await fetch(`https://www.dhlottery.co.kr/common.do?method=getLottoNumber&drwNo=${drawNo}`);
                        const data = await res.json();
                        if (data.returnValue !== "success") return null;
                        // 1~6ë²ˆ + ë³´ë„ˆìŠ¤ ë²ˆí˜¸
                        return [
                            data.drwtNo1, data.drwtNo2, data.drwtNo3,
                            data.drwtNo4, data.drwtNo5, data.drwtNo6,
                            data.bnusNo
                        ];
                    }
                    
                    // ìµœê·¼ 1ë…„(ì•½ 52ì£¼)ê°„ ë‹¹ì²¨ë²ˆí˜¸ ë°ì´í„° ìˆ˜ì§‘
                    async function fetchRecentLottoData() {
                        const latest = await getLatestDrawNo();
                        const results = [];
                        for (let i = 0; i < 52; i++) {
                            const nums = await fetchLottoNumbers(latest - i);
                            if (nums) results.push(nums);
                        }
                        return results;
                    }
                    
                    // ë¶„ì„ ë²„íŠ¼ í´ë¦­ ì‹œ APIë¡œ ë°ì´í„° ìˆ˜ì§‘
                    document.getElementById('analyzeBtn').addEventListener('click', async () => {
                        document.getElementById('loading').style.display = 'flex';
                        const lottoData = await fetchRecentLottoData();
                        document.getElementById('loading').style.display = 'none';
                        // lottoData: [[1,2,3,4,5,6,7], ...] í˜•íƒœ
                        // ì—¬ê¸°ì„œ ë¶„ì„/ì°¨íŠ¸/ì¶”ì²œ ë¡œì§ í˜¸ì¶œ
                        analyzeLottoData(lottoData);
                        document.getElementById('generateBtn').disabled = false;
                    });
                    
                    // ë¶„ì„/ì¶”ì²œ í•¨ìˆ˜ ì˜ˆì‹œ (lottoDataë¥¼ í™œìš©)
                    function analyzeLottoData(lottoData) {
                        // ë²ˆí˜¸ ë¹ˆë„, í™€ì§, êµ¬ê°„, í•©ê³„ ë“± ë¶„ì„
                        // Chart.jsë¡œ ì‹œê°í™”, ì¶”ì²œë²ˆí˜¸ ìƒì„± ë“±
                        // ...ì—¬ê¸°ì— ê¸°ì¡´ ë¶„ì„/ì¶”ì²œ ì½”ë“œ ì—°ê²°...
                    }
                    
                    // ...existing code...  <div id="aiRecommendations" class="lotto-sets">
                        <!-- AI ì¶”ì²œ ë²ˆí˜¸ ì„¸íŠ¸ë“¤ -->
                    </div>
                </div>

                <div class="card">
                    <h3>âš–ï¸ ê· í˜•ì¡íŒ ì „ëµ ë²ˆí˜¸</h3>
                    <p class="description">ê° êµ¬ê°„(1-15, 16-30, 31-45)ì—ì„œ ê· ë“±í•˜ê²Œ ì„ íƒí•œ ë²ˆí˜¸ì…ë‹ˆë‹¤.</p>
                    <div id="balancedRecommendations" class="lotto-sets">
                        <!-- ê· í˜•ì¡íŒ ë²ˆí˜¸ ì„¸íŠ¸ë“¤ -->
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <div class="warning">
                <h4>âš ï¸ ì¤‘ìš” ì•ˆë‚´ì‚¬í•­</h4>
                <ul>
                    <li>ë¡œë˜ëŠ” ì™„ì „í•œ í™•ë¥ ê²Œì„ì…ë‹ˆë‹¤</li>
                    <li>ê³¼ê±° ë°ì´í„° ë¶„ì„ì´ ë¯¸ë˜ ë‹¹ì²¨ì„ ë³´ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤</li>
                    <li>ì´ ë¶„ì„ì€ í†µê³„ì  ì°¸ê³ ìš©ìœ¼ë¡œë§Œ í™œìš©í•˜ì„¸ìš”</li>
                    <li>ì±…ì„ê° ìˆëŠ” ê²Œì„ ì°¸ì—¬ë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤</li>
                </ul>
            </div>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>
