<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>로또 번호 분석기</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>🎰 로또 번호 분석기</h1>
            <p>최근 15개 회차 로또 데이터를 분석하여 번호를 추천합니다</p>
        </header>

        <div class="controls">
            <button id="analyzeBtn" class="btn-primary">📊 데이터 분석 시작</button>
            <button id="generateBtn" class="btn-secondary" disabled>🎲 번호 생성</button>
            <div class="loading" id="loading" style="display: none;">
                <div class="spinner"></div>
                <span>데이터 분석 중...</span>
            </div>
        </div>

        <div class="status" id="status"></div>

        <div class="tabs">
            <button class="tab-btn active" data-tab="analysis">📈 분석 결과</button>
            <button class="tab-btn" data-tab="hot-numbers">🔥 자주 나온 번호</button>
            <button class="tab-btn" data-tab="cold-numbers">❄️ 적게 나온 번호</button>
            <button class="tab-btn" data-tab="recommended">🎯 AI 추천</button>
        </div>

        <div class="tab-content">
            <!-- 분석 결과 탭 -->
            <div id="analysis" class="tab-panel active">
                <div class="analysis-grid">
                    <div class="card">
                        <h3>📊 번호별 출현 빈도</h3>
                        <canvas id="frequencyChart"></canvas>
                    </div>
                    <div class="card">
                        <h3>🔢 홀짝 분포</h3>
                        <canvas id="oddEvenChart"></canvas>
                    </div>
                    <div class="card">
                        <h3>📍 구간별 분포</h3>
                        <canvas id="rangeChart"></canvas>
                    </div>
                    <div class="card">
                        <h3>📈 합계 분포</h3>
                        <canvas id="sumChart"></canvas>
                    </div>
                </div>
                
                <div class="stats-summary" id="statsSummary">
                    <!-- 통계 요약이 여기에 표시됩니다 -->
                </div>
            </div>

            <!-- 자주 나온 번호 탭 -->
            <div id="hot-numbers" class="tab-panel">
                <div class="card">
                    <h3>🔥 자주 나온 번호 TOP 15</h3>
                    <div id="hotNumbersList" class="number-list">
                        <!-- 자주 나온 번호 목록 -->
                    </div>
                </div>
                
                <div class="card">
                    <h3>🔥 자주 나온 번호 기반 추천</h3>
                    <div id="hotRecommendations" class="lotto-sets">
                        <!-- 추천 번호 세트들 -->
                    </div>
                </div>
            </div>

            <!-- 적게 나온 번호 탭 -->
            <div id="cold-numbers" class="tab-panel">
                <div class="card">
                    <h3>❄️ 적게 나온 번호 TOP 15</h3>
                    <div id="coldNumbersList" class="number-list">
                        <!-- 적게 나온 번호 목록 -->
                    </div>
                </div>
                
                <div class="card">
                    <h3>❄️ 적게 나온 번호 기반 추천</h3>
                    <div id="coldRecommendations" class="lotto-sets">
                        <!-- 추천 번호 세트들 -->
                    </div>
                </div>
            </div>

            <!-- AI 추천 탭 (수정됨) -->
            <div id="recommended" class="tab-panel">
                <!-- 새로 추가: 최신 15개 회차 히트맵 분석 -->
                <div class="card">
                    <h3>📊 최신 15개 회차 마킹 분석</h3>
                    <p class="description">최신 15개 회차의 당첨번호를 로또 용지 형식으로 시각화합니다.</p>
                    <div id="recentDrawsSheet" class="recent-draws-sheet">
                        <!-- 최신 회차 마킹이 여기에 표시됩니다 -->
                    </div>
                </div>

                <!-- 새로 추가: 확률 높은 번호 TOP 5 -->
                <div class="card">
                    <h3>🔮 다음 회차 확률 높은 번호 TOP 5</h3>
                    <p class="description">AI 알고리즘이 분석한 다음 회차 출현 확률이 높은 번호들입니다.</p>
                    <div id="predictionNumbers" class="prediction-numbers">
                        <!-- 예측 번호들이 여기에 표시됩니다 -->
                    </div>
                </div>

                <!-- 기존: AI 종합 분석 추천 번호 -->
                <div class="card">
                    <h3>🎯 AI 종합 분석 추천 번호</h3>
                    <p class="description">빈도, 구간 균형, 홀짝 균형을 종합적으로 고려한 추천 번호입니다.</p>
                    <div id="aiRecommendations" class="lotto-sets">
                        <!-- AI 추천 번호 세트들 -->
                    </div>
                </div>

                <!-- 새로 추가: 확률 기반 추천 조합 -->
                <div class="card">
                    <h3>🎲 확률 기반 추천 조합</h3>
                    <p class="description">확률 높은 번호 5개를 포함한 추천 조합입니다.</p>
                    <div id="probabilityRecommendations" class="lotto-sets">
                        <!-- 확률 기반 추천 조합들 -->
                    </div>
                </div>

                <!-- 기존: 로또 용지 마킹 형식 -->
                <div class="card">
                    <h3>📝 로또 용지 마킹 형식</h3>
                    <p class="description">아래 번호들을 실제 로또 용지에 마킹하세요!</p>
                    <div id="lottoSheet" class="lotto-sheet">
                        <!-- 로또 용지가 여기에 표시됩니다 -->
                    </div>
                </div>

                <!-- 기존: 균형잡힌 전략 번호 -->
                <div class="card">
                    <h3>⚖️ 균형잡힌 전략 번호</h3>
                    <p class="description">각 구간(1-15, 16-30, 31-45)에서 균등하게 선택한 번호입니다.</p>
                    <div id="balancedRecommendations" class="lotto-sets">
                        <!-- 균형잡힌 번호 세트들 -->
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <div class="warning">
                <h4>⚠️ 중요 안내사항</h4>
                <ul>
                    <li>로또는 완전한 확률게임입니다</li>
                    <li>과거 데이터 분석이 미래 당첨을 보장하지 않습니다</li>
                    <li>이 분석은 통계적 참고용으로만 활용하세요</li>
                    <li>책임감 있는 게임 참여를 권장합니다</li>
                </ul>
            </div>
        </footer>
    </div>

    <!-- CORS 프록시 사용을 위한 스크립트 -->
    <script>
        const CORS_PROXY = 'https://api.allorigins.win/raw?url=';
    </script>
    
    <script src="script.js"></script>
</body>
</html>
